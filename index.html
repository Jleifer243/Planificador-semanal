<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Planificador Semanal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Inter', sans-serif; background: #f3f4f6; }
    .header-gradient {
      background: linear-gradient(90deg,#86c1f2 0%,#a288fa 100%);
    }
    .day-tab { font-size: 1.15rem; font-weight: 700; }
    .task-box { min-height: 48px; border: 2px dashed #d1d5db; padding: 10px; border-radius: 12px; background:#fff; transition: box-shadow .2s; }
    .task-box:focus { outline: 2px solid #6366f1; box-shadow: 0 2px 8px 0 #a5b4fc44; }
    .subject-title { font-size: 1rem; font-weight: 700; margin-bottom: 4px; }
    .hour-label { background: #fff; border-radius: 12px; font-weight: 600; font-size: 1.14rem; color: #6366f1; box-shadow: 0 1px 4px #0001; }
    .tab-lunes { background: #38bdf8; color: #fff;}
    .tab-martes { background: #34d399; color: #fff;}
    .tab-miercoles { background: #fde047; color: #a16207;}
    .tab-jueves { background: #f472b6; color: #fff;}
    .tab-viernes { background: #a78bfa; color: #fff;}
    .card-lunes {border:2px solid #38bdf8;}
    .card-martes {border:2px solid #34d399;}
    .card-miercoles {border:2px solid #fde047;}
    .card-jueves {border:2px solid #f472b6;}
    .card-viernes {border:2px solid #a78bfa;}
  </style>
</head>
<body>
  <div class="header-gradient p-6 rounded-b-2xl mb-4 shadow">
    <h1 class="text-3xl font-extrabold text-center text-white tracking-wide">Semana del 15 al 19 de septiembre de 2025</h1>
  </div>
  <div class="flex justify-center mb-6 gap-3">
    <div class="day-tab tab-lunes px-6 py-2 rounded-xl shadow">Lunes <sup>15</sup></div>
    <div class="day-tab tab-martes px-6 py-2 rounded-xl shadow">Martes <sup>16</sup></div>
    <div class="day-tab tab-miercoles px-6 py-2 rounded-xl shadow">Miércoles <sup>17</sup></div>
    <div class="day-tab tab-jueves px-6 py-2 rounded-xl shadow">Jueves <sup>18</sup></div>
    <div class="day-tab tab-viernes px-6 py-2 rounded-xl shadow">Viernes <sup>19</sup></div>
  </div>
  <div class="grid grid-cols-6 gap-3 max-w-6xl mx-auto">
    <div></div>
    <div class="hour-label text-center py-2">Lunes</div>
    <div class="hour-label text-center py-2">Martes</div>
    <div class="hour-label text-center py-2">Miércoles</div>
    <div class="hour-label text-center py-2">Jueves</div>
    <div class="hour-label text-center py-2">Viernes</div>
    
    <!-- 1ª Hora -->
    <div class="hour-label flex items-center justify-center h-24">1ª Hora</div>

    <div class="p-2 card-lunes rounded-xl bg-white flex flex-col">
      <div class="subject-title">Latín 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="lunes" data-hora="1" data-asignatura="latin4"></div>
    </div>
    <div class="p-2 card-martes rounded-xl bg-white flex flex-col">
      <div class="subject-title">Latín 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="martes" data-hora="1" data-asignatura="latin4"></div>
    </div>
    <div class="p-2 card-miercoles rounded-xl bg-white flex flex-col">
      <div class="subject-title">Oratoria y Debate 3º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="miercoles" data-hora="1" data-asignatura="oratoria"></div>
    </div>
    <div class="p-2 card-jueves rounded-xl bg-white flex flex-col">
      <div class="subject-title">Oratoria y Debate 3º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="jueves" data-hora="1" data-asignatura="oratoria"></div>
    </div>
    <div class="p-2 card-viernes rounded-xl bg-white flex flex-col">
      <div class="subject-title">Lengua 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="viernes" data-hora="1" data-asignatura="lengua4"></div>
    </div>

    <!-- 2ª Hora -->
    <div class="hour-label flex items-center justify-center h-24">2ª Hora</div>
    <div class="p-2 card-lunes rounded-xl bg-white flex flex-col">
      <div class="subject-title">Lengua 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="lunes" data-hora="2" data-asignatura="lengua4"></div>
    </div>
    <div class="p-2 card-martes rounded-xl bg-white flex flex-col">
      <div class="subject-title">Lengua 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="martes" data-hora="2" data-asignatura="lengua4"></div>
    </div>
    <div class="p-2 card-miercoles rounded-xl bg-white flex flex-col">
      <div class="subject-title">Latín 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="miercoles" data-hora="2" data-asignatura="latin4"></div>
    </div>
    <div class="p-2 card-jueves rounded-xl bg-white flex flex-col">
      <div class="subject-title">Latín 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="jueves" data-hora="2" data-asignatura="latin4"></div>
    </div>
    <div class="p-2 card-viernes rounded-xl bg-white flex flex-col">
      <div class="subject-title">ATEDU 3º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="viernes" data-hora="2" data-asignatura="atedu3"></div>
    </div>

    <!-- 3ª Hora -->
    <div class="hour-label flex items-center justify-center h-24">3ª Hora</div>
    <div class="p-2 card-lunes rounded-xl bg-white flex flex-col"></div>
    <div class="p-2 card-martes rounded-xl bg-white flex flex-col"></div>
    <div class="p-2 card-miercoles rounded-xl bg-white flex flex-col">
      <div class="subject-title">Lengua 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="miercoles" data-hora="3" data-asignatura="lengua4"></div>
    </div>
    <div class="p-2 card-jueves rounded-xl bg-white flex flex-col"></div>
    <div class="p-2 card-viernes rounded-xl bg-white flex flex-col">
      <div class="subject-title">Lengua 4º ESO</div>
      <div contenteditable="true" class="task-box editable-cell" data-dia="viernes" data-hora="3" data-asignatura="lengua4"></div>
    </div>
  </div>
  <script>
    const scriptURL = 
https://script.google.com/macros/s/AKfycbwJEggeAiGraKBi0M4XegxSXTscID3Qqv2N0-ykDzTpyAt5Uc1JFDIfj4U1uJwbkIpr/exec;
    async function cargarDatos() {
      try {
        const res = await fetch(`${scriptURL}?action=load`);
        const data = await res.json();
        data.forEach(item => {
          const celda = document.querySelector(
            `[data-dia="${item.dia}"][data-hora="${item.hora}"][data-asignatura="${item.asignatura}"]`
          );
          if (celda) {
            celda.textContent = item.contenido;
          }
        });
      } catch (e) {
        console.error('Error al cargar datos', e);
      }
    }
    async function guardarDato(dia, hora, asignatura, contenido) {
      try {
        await fetch(
          `${scriptURL}?action=save&dia=${dia}&hora=${hora}&asignatura=${asignatura}&contenido=${encodeURIComponent(contenido)}`
        );
      } catch (e) {
        console.error('Error al guardar dato', e);
      }
    }
    document.addEventListener('DOMContentLoaded', () => {
      cargarDatos();
      const celdas = document.querySelectorAll('.editable-cell');
      celdas.forEach((celda) => {
        celda.addEventListener('input', (e) => {
          const el = e.target;
          const dia = el.getAttribute('data-dia');
          const hora = el.getAttribute('data-hora');
          const asignatura = el.getAttribute('data-asignatura');
          const contenido = el.textContent;
          guardarDato(dia, hora, asignatura, contenido);
        });
      });
    });
  </script>
</body>
</html>
